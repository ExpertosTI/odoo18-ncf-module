<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="ncf.OrderReceiptPatch" t-inherit="point_of_sale.ReceiptHeader" t-inherit-mode="extension" owl="1">
        <!-- Dirección de la empresa DENTRO del bloque de contacto, para que quede encima del número -->
        <xpath expr="//div[hasclass('pos-receipt-contact')]" position="inside">
            <t t-set="comp" t-value="props.data.company"/>
            <div style="font-size: 12px; line-height: 1.2; margin-top: 2px; text-align: left; width: 100%;">
                <t t-esc="((comp and comp.street) or '')
                           + (((comp and comp.street2) and (', ' + comp.street2)) or '')
                           + (((comp and comp.city) and (', ' + comp.city)) or '')"/>
            </div>
        </xpath>

        <!-- Bloque principal del encabezado de factura -->
        <xpath expr="//div[hasclass('pos-receipt-contact')]" position="after">
            <div class="pos-center-align">------------------------------</div>

            <!-- Título de la factura inmediatamente bajo el número -->
            <div class="pos-center-align" style="font-weight: bold; margin-top: 2px;">
                <t t-esc="props.data.ncf_type_name or ((props.data.headerData and props.data.headerData.ncf_type_name) or 'FACTURA DE CONSUMO')"/>
            </div>

            <!-- Bloque informativo estilo ticket térmico (CLIENTE/FECHA removidos) -->
            <div class="pos-receipt-info" style="font-size: 12px; line-height: 1.25; margin-top: 6px; width: 100%; text-align: left;">
                <!-- CLIENTE y FECHA eliminados por requerimiento -->
                <div t-if="props.data.ncf or (props.data.headerData and props.data.headerData.ncf)" style="margin-top: 6px;">
                    <span style="font-weight: 700;">NCF:</span>
                    <span style="margin-left: 4px;">
                        <t t-esc="props.data.ncf or (props.data.headerData and props.data.headerData.ncf)"/>
                    </span>
                </div>
                <div t-if="props.data.ncf or (props.data.headerData and props.data.headerData.ncf)" style="font-size: 10px; margin-top: 6px;">
                    Válido hasta: 31 de dic 2025
                </div>
            </div>

            <!-- Separador final del bloque -->
            <div class="pos-center-align" style="margin-top: 6px;">------------------------------</div>
        </xpath>
    </t>
</templates>
