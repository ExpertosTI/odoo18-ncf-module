<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Vista de formulario para el wizard de selección NCF -->
        <record id="view_ncf_sequence_wizard_form" model="ir.ui.view">
            <field name="name">ncf.sequence.wizard.form</field>
            <field name="model">ncf.sequence.wizard</field>
            <field name="arch" type="xml">
                <form string="Seleccionar Tipo de NCF" class="o_form_view o_form_editable">
                    <!-- Header empresarial moderno -->
                    <div style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 24px; margin: -16px -16px 24px -16px; border-radius: 0;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <h2 style="margin: 0; font-size: 24px; font-weight: 600; color: white;">
                                    <i class="fa fa-file-text-o" style="margin-right: 12px; color: #3498db;"></i>
                                    Configuración de Comprobante Fiscal
                                </h2>
                                <p style="margin: 8px 0 0 0; font-size: 14px; color: #bdc3c7; font-weight: 400;">
                                    Configure el tipo de NCF apropiado para esta transacción comercial
                                </p>
                            </div>
                            <div style="background: rgba(52, 152, 219, 0.2); padding: 12px; border-radius: 8px; border: 1px solid rgba(52, 152, 219, 0.3);">
                                <i class="fa fa-shield" style="font-size: 24px; color: #3498db;"></i>
                            </div>
                        </div>
                    </div>
                    
                    <sheet style="padding: 0;">
                        <!-- Información de la factura -->
                        <div style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 24px;">
                            <h4 style="color: #2c3e50; margin: 0 0 16px 0; font-size: 16px; font-weight: 600; display: flex; align-items: center;">
                                <i class="fa fa-info-circle" style="margin-right: 8px; color: #3498db;"></i>
                                Información de la Factura
                            </h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="move_id" class="o_form_label" style="color: #495057; font-weight: 500; margin-bottom: 4px;">Factura</label>
                                    <field name="move_id" readonly="1" 
                                           style="background: white; border: 1px solid #ced4da; border-radius: 4px; padding: 8px; font-weight: 500; color: #2c3e50;"/>
                                    <field name="company_id" invisible="1"/>
                                </div>
                                <div class="col-md-6" invisible="not current_ncf">
                                    <label for="current_ncf" class="o_form_label" style="color: #495057; font-weight: 500; margin-bottom: 4px;">NCF Actual</label>
                                    <field name="current_ncf" readonly="1"
                                           style="background: #e8f5e8; border: 1px solid #28a745; border-radius: 4px; padding: 8px; font-weight: 600; color: #155724;"/>
                                </div>
                            </div>
                        </div>

                        <!-- Configuración NCF -->
                        <div style="background: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 24px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <h4 style="color: #2c3e50; margin: 0 0 16px 0; font-size: 16px; font-weight: 600; display: flex; align-items: center;">
                                <i class="fa fa-cogs" style="margin-right: 8px; color: #e74c3c;"></i>
                                Configuración NCF
                            </h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="ncf_sequence_id" class="o_form_label" style="color: #495057; font-weight: 500; margin-bottom: 8px;">Secuencia NCF *</label>
                                    <field name="ncf_sequence_id" 
                                           widget="selection"
                                           options="{'no_create': True, 'no_edit': True}"
                                           placeholder="Seleccione una secuencia NCF..."
                                           style="background: white; border: 2px solid #3498db; border-radius: 6px; padding: 12px; font-size: 14px;"
                                           required="1"/>
                                </div>
                                <div class="col-md-6" invisible="not ncf_sequence_id">
                                    <label for="ncf_type" class="o_form_label" style="color: #495057; font-weight: 500; margin-bottom: 8px;">Tipo de Comprobante</label>
                                    <field name="ncf_type" readonly="1"
                                           style="background: #f8f9fa; border: 1px solid #ced4da; border-radius: 4px; padding: 12px; font-weight: 500; color: #495057;"/>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Panel de confirmación -->
                        <div invisible="not ncf_sequence_id" style="background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
                            <div style="display: flex; align-items: center;">
                                <i class="fa fa-check-circle" style="font-size: 20px; margin-right: 12px;"></i>
                                <div>
                                    <strong style="font-size: 16px;">Listo para generar</strong>
                                    <p style="margin: 4px 0 0 0; font-size: 14px; opacity: 0.9;">
                                        Se asignará automáticamente el próximo número de la secuencia seleccionada
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Panel de ayuda empresarial -->
                        <div style="background: #f8f9fa; border-left: 4px solid #17a2b8; padding: 20px; border-radius: 0 8px 8px 0; margin-bottom: 24px;">
                            <h5 style="color: #2c3e50; margin: 0 0 12px 0; font-size: 15px; font-weight: 600; display: flex; align-items: center;">
                                <i class="fa fa-lightbulb-o" style="margin-right: 8px; color: #f39c12;"></i>
                                Guía de Tipos de Comprobante
                            </h5>
                            <div class="row">
                                <div class="col-md-4">
                                    <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; border-left: 3px solid #3498db;">
                                        <strong style="color: #2c3e50; font-size: 13px;">Factura Final</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 12px; color: #6c757d;">Para ventas a consumidores finales</p>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; border-left: 3px solid #e74c3c;">
                                        <strong style="color: #2c3e50; font-size: 13px;">Factura Fiscal</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 12px; color: #6c757d;">Para ventas a empresas con RNC</p>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; border-left: 3px solid #f39c12;">
                                        <strong style="color: #2c3e50; font-size: 13px;">Nota de Crédito</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 12px; color: #6c757d;">Para devoluciones y ajustes</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </sheet>
                    
                    <!-- Footer empresarial -->
                    <footer style="background: #f8f9fa; border-top: 1px solid #e9ecef; padding: 16px 24px; margin: 24px -16px -16px -16px; display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; gap: 12px;">
                            <button name="action_apply" 
                                    type="object" 
                                    string="Asignar NCF" 
                                    class="btn btn-primary"
                                    style="background: linear-gradient(135deg, #27ae60, #2ecc71); border: none; padding: 10px 20px; border-radius: 6px; font-weight: 600; box-shadow: 0 2px 4px rgba(39, 174, 96, 0.3);"
                                    invisible="not ncf_sequence_id">
                                <i class="fa fa-check-circle" style="margin-right: 6px;"></i>
                            </button>
                            <button name="action_remove_ncf" 
                                    type="object" 
                                    string="Remover NCF" 
                                    class="btn btn-warning"
                                    style="background: linear-gradient(135deg, #e67e22, #f39c12); border: none; padding: 10px 20px; border-radius: 6px; font-weight: 600; box-shadow: 0 2px 4px rgba(230, 126, 34, 0.3);"
                                    invisible="not current_ncf"
                                    confirm="¿Está seguro de que desea remover el NCF de esta factura? Esta acción no se puede deshacer.">
                                <i class="fa fa-trash" style="margin-right: 6px;"></i>
                            </button>
                        </div>
                        <button string="Cancelar" 
                                class="btn btn-secondary"
                                style="background: #6c757d; border: none; padding: 10px 20px; border-radius: 6px; font-weight: 500;"
                                special="cancel">
                            <i class="fa fa-times" style="margin-right: 6px;"></i>
                        </button>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Acción para abrir el wizard -->
        <record id="action_ncf_sequence_wizard" model="ir.actions.act_window">
            <field name="name">Seleccionar Secuencia NCF</field>
            <field name="res_model">ncf.sequence.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="binding_model_id" ref="account.model_account_move"/>
            <field name="binding_view_types">form</field>
        </record>
    </data>
</odoo>